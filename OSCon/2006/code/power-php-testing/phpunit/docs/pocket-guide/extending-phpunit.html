<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Chapter 15. Extending PHPUnit</title><link rel="stylesheet" href="docbook.css" type="text/css"></link><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"></meta><link rel="start" href="index.html" title="PHPUnit Pocket Guide"></link><link rel="up" href="index.html" title="PHPUnit Pocket Guide"></link><link rel="prev" href="api.html" title="Chapter 14. PHPUnit API"></link><link rel="next" href="appendixes.phpunit1.html" title="Appendix A. PHPUnit for PHP 4"></link><script xmlns="" src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script><script xmlns="" type="text/javascript">_uacct = "UA-68261-2";urchinTracker();</script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 15. Extending PHPUnit</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="api.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="appendixes.phpunit1.html">Next</a></td></tr></table><hr></hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="extending-phpunit"></a>Chapter 15. Extending PHPUnit</h2></div></div></div><p>
    PHPUnit can be extended in various ways to make the writing of tests
    easier and customize the feedback you get from running tests. Here are
    common starting points to extend PHPUnit.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.PHPUnit2_Framework_TestCase"></a>Subclass PHPUnit2_Framework_TestCase</h2></div></div></div><p>
      <a id="id414452" class="indexterm"></a>

      Write utility methods in an abstract subclass of
      <code class="literal">PHPUnit2_Framework_TestCase</code> and derive your test case
      classes from that class. This is one of the easiest ways to extend
      PHPUnit.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.Assert"></a>Assert Classes</h2></div></div></div><p>
      <a id="id415519" class="indexterm"></a>
      <a id="id415526" class="indexterm"></a>

      Write your own class with assertions special to your purpose.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.PHPUnit2_Extensions_TestDecorator"></a>Subclass PHPUnit2_Extensions_TestDecorator</h2></div></div></div><p>
      <a id="id415114" class="indexterm"></a>

      You can wrap test cases or test suites in a subclass of
      <code class="literal">PHPUnit2_Extensions_TestDecorator</code> and use the
      Decorator design pattern to perform some actions before and after the
      test runs.
    </p><p>
      <a id="id415136" class="indexterm"></a>
      <a id="id415144" class="indexterm"></a>

      PHPUnit ships with two concrete test decorators:
      <code class="literal">PHPUnit2_Extensions_RepeatedTest</code> and
      <code class="literal">PHPUnit2_Extensions_TestSetup</code>. The former is used to
      run a test repeatedly and only count it as a success if all iterations
      are successful. The latter was discussed in <a href="fixtures.html" title="Chapter 5. Fixtures">Chapter 5</a>.
    </p><p>
      <a href="extending-phpunit.html#extending-phpunit.examples.RepeatedTest.php" title="Example 15.1: The RepeatedTest Decorator">Example 15.1</a>
      shows a cut-down version of the <code class="literal">PHPUnit2_Extensions_RepeatedTest</code>
      test decorator that illustrates how to write your own test decorators.
    </p><div class="example"><a id="extending-phpunit.examples.RepeatedTest.php"></a><p class="title"><b>Example 15.1: The RepeatedTest Decorator</b></p><pre class="programlisting"><code><span style="color: #113d73;">&lt;?php</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Extensions/TestDecorator.php'</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #005500;">class</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Extensions_RepeatedTest</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">extends</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Extensions_TestDecorator</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">private</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$timesRepeat</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">1</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">__construct</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$timesRepeat</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">1</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">parent</span><span style="color: #005500;">::</span><span style="color: #113d73;">__construct</span><span style="color: #005500;">(</span><span style="color: #113d73;">$test</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">if</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">is_integer</span><span style="color: #005500;">(</span><span style="color: #113d73;">$timesRepeat</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">&amp;&amp;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$timesRepeat</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">&gt;=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">0</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">timesRepeat</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$timesRepeat</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">countTestCases</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">return</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">timesRepeat</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">*</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">countTestCases</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">run</span><span style="color: #005500;">(</span><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">NULL</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">if</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">===</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">NULL</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">createResult</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">for</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">$i</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">0</span><span style="color: #005500;">;</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$i</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">&lt;</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">timesRepeat</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">&amp;&amp;</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">!</span><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">shouldStop</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$i</span><span style="color: #005500;">++</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">run</span><span style="color: #005500;">(</span><span style="color: #113d73;">$result</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">return</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br /><span style="color: #005500;">}</span><br /><span style="color: #113d73;">?&gt;</span><br /></code></pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.PHPUnit2_Framework_Test"></a>Implement PHPUnit2_Framework_Test</h2></div></div></div><p>
      <a id="id415657" class="indexterm"></a>
      <a id="id415664" class="indexterm"></a>

      The <code class="literal">PHPUnit2_Framework_Test</code> interface is narrow and
      easy to implement. You can write an implementation of
      <code class="literal">PHPUnit2_Framework_Test</code> that is simpler than
      <code class="literal">PHPUnit2_Framework_TestCase</code> and that runs
      <span class="emphasis"><em>data-driven tests</em></span>, for instance.
    </p><p>
      <a href="extending-phpunit.html#extending-phpunit.examples.DataDrivenTest.php" title="Example 15.2: A data-driven test">Example 15.2</a>
      shows a data-driven test-case class that compares values from a file
      with Comma-Separated Values (CSV). Each line of such a file looks like
      <code class="literal">foo;bar</code>, where the first value is the one we expect
      and the second value is the actual one.
    </p><div class="example"><a id="extending-phpunit.examples.DataDrivenTest.php"></a><p class="title"><b>Example 15.2: A data-driven test</b></p><pre class="programlisting"><code><span style="color: #113d73;">&lt;?php</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Framework/Assert.php'</span><span style="color: #005500;">;</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Framework/Test.php'</span><span style="color: #005500;">;</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Framework/TestResult.php'</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #005500;">class</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">DataDrivenTest</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">implements</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">private</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$lines</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">__construct</span><span style="color: #005500;">(</span><span style="color: #113d73;">$dataFile</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">lines</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">file</span><span style="color: #005500;">(</span><span style="color: #113d73;">$dataFile</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">countTestCases</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">return</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">sizeof</span><span style="color: #005500;">(</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">lines</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">run</span><span style="color: #005500;">(</span><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">NULL</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">if</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">===</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">NULL</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">new</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_TestResult</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">startTest</span><span style="color: #005500;">(</span><span style="color: #113d73;">$this</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">foreach</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">$this</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">lines</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">as</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$line</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">list</span><span style="color: #005500;">(</span><span style="color: #113d73;">$expected</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$actual</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">explode</span><span style="color: #005500;">(</span><span style="color: #550000;">';'</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$line</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">try</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_Assert</span><span style="color: #005500;">::</span><span style="color: #113d73;">assertEquals</span><span style="color: #005500;">(</span><span style="color: #113d73;">trim</span><span style="color: #005500;">(</span><span style="color: #113d73;">$expected</span><span style="color: #005500;">)</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">trim</span><span style="color: #005500;">(</span><span style="color: #113d73;">$actual</span><span style="color: #005500;">)</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">catch</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_ComparisonFailure</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">addFailure</span><span style="color: #005500;">(</span><span style="color: #113d73;">$this</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">catch</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">(</span><span style="color: #113d73;">Exception</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">addError</span><span style="color: #005500;">(</span><span style="color: #113d73;">$this</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">endTest</span><span style="color: #005500;">(</span><span style="color: #113d73;">$this</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">return</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br /><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">$test</span><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">new</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">DataDrivenTest</span><span style="color: #005500;">(</span><span style="color: #550000;">'data_file.csv'</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">run</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #113d73;">$failures</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">failures</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">print</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$failures</span><span style="color: #005500;">[</span><span style="color: #113d73;">0</span><span style="color: #005500;">]</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">thrownException</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">toString</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">?&gt;</span><br /></code></pre><pre class="screen">expected: &lt;foo&gt; but was: &lt;bar&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.PHPUnit2_Framework_TestResult"></a>Subclass PHPUnit2_Framework_TestResult</h2></div></div></div><p>
      <a id="id415722" class="indexterm"></a>

      By passing a special-purpose <code class="literal">PHPUnit2_Framework_TestResult</code>
      object to the <code class="literal">run()</code> method, you can change the way
      tests are run and what result data gets collected.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.PHPUnit2_Framework_TestListener"></a>Implement PHPUnit2_Framework_TestListener</h2></div></div></div><p>
      <a id="id415784" class="indexterm"></a>
      <a id="id415792" class="indexterm"></a>

      You do not necessarily need to write a whole subclass of
      <code class="literal">PHPUnit2_Framework_TestResult</code> in order to customize
      it. Most of the time, it will suffice to implement a new
      <code class="literal">PHPUnit2_Framework_TestListener</code>
      (see <a href="api.html#api.testresult.tables.testlistener" title="Table 14.10. TestListener Callbacks">Table 14.10</a>) and attach
      it to the <code class="literal">PHPUnit2_Framework_TestResult</code> object, before
      running the tests.
    </p><p>
      <a href="extending-phpunit.html#extending-phpunit.examples.SimpleTestListener.php" title="Example 15.3: A simple test listener">Example 15.3</a>
      shows a simple implementation of the <code class="literal">PHPUnit2_Framework_TestListener</code>
      interface.
    </p><div class="example"><a id="extending-phpunit.examples.SimpleTestListener.php"></a><p class="title"><b>Example 15.3: A simple test listener</b></p><pre class="programlisting"><code><span style="color: #113d73;">&lt;?php</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Framework/TestListener.php'</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #005500;">class</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">SimpleTestListener</span><br /><span style="color: #113d73;">implements</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_TestListener</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #113d73;">addError</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">,</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">Exception</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;Error&nbsp;while&nbsp;running&nbsp;test&nbsp;'%s'.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #113d73;">addFailure</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_AssertionFailedError</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;Test&nbsp;'%s'&nbsp;failed.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #113d73;">addIncompleteTest</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">Exception</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$e</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;Test&nbsp;'%s'&nbsp;is&nbsp;incomplete.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">startTest</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;Test&nbsp;'%s'&nbsp;started.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">endTest</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_Test</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;Test&nbsp;'%s'&nbsp;ended.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$test</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #113d73;">startTestSuite</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_TestSuite</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$suite</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;TestSuite&nbsp;'%s'&nbsp;started.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$suite</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br />&nbsp;<br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">public</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">function</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #113d73;">endTestSuite</span><span style="color: #005500;">(</span><span style="color: #113d73;">PHPUnit2_Framework_TestSuite</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">$suite</span><span style="color: #005500;">)</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">{</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">printf</span><span style="color: #005500;">(</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #550000;">&quot;TestSuite&nbsp;'%s'&nbsp;ended.\n&quot;</span><span style="color: #005500;">,</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #113d73;">$suite</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">getName</span><span style="color: #005500;">(</span><span style="color: #005500;">)</span><br /><span style="color: #113d73;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">&nbsp;&nbsp;</span><span style="color: #005500;">}</span><br /><span style="color: #005500;">}</span><br /><span style="color: #113d73;">?&gt;</span><br /></code></pre></div><p>
      <a id="id415932" class="indexterm"></a>
      <a id="id415940" class="indexterm"></a>

      <a href="extending-phpunit.html#extending-phpunit.examples.SimpleTestListener-example.php" title="Example 15.4: Running and observing a test suite">Example 15.4</a>
      shows how to run and observe a test suite.
    </p><div class="example"><a id="extending-phpunit.examples.SimpleTestListener-example.php"></a><p class="title"><b>Example 15.4: Running and observing a test suite</b></p><pre class="programlisting"><code><span style="color: #113d73;">&lt;?php</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Framework/TestResult.php'</span><span style="color: #005500;">;</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'PHPUnit2/Framework/TestSuite.php'</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'ArrayTest.php'</span><span style="color: #005500;">;</span><br /><span style="color: #005500;">require_once</span><span style="color: #113d73;">&nbsp;</span><span style="color: #550000;">'SimpleTestListener.php'</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #ba8370;">//&nbsp;Create&nbsp;a&nbsp;test&nbsp;suite&nbsp;that&nbsp;contains&nbsp;the&nbsp;tests</span><br /><span style="color: #ba8370;">//&nbsp;from&nbsp;the&nbsp;ArrayTest&nbsp;class.</span><br /><span style="color: #113d73;">$suite</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">new</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_TestSuite</span><span style="color: #005500;">(</span><span style="color: #550000;">'ArrayTest'</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #ba8370;">//&nbsp;Create&nbsp;a&nbsp;test&nbsp;result&nbsp;and&nbsp;attach&nbsp;a&nbsp;SimpleTestListener</span><br /><span style="color: #ba8370;">//&nbsp;object&nbsp;as&nbsp;an&nbsp;observer&nbsp;to&nbsp;it.</span><br /><span style="color: #113d73;">$result</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">=</span><span style="color: #113d73;">&nbsp;</span><span style="color: #005500;">new</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">PHPUnit2_Framework_TestResult</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">$result</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">addListener</span><span style="color: #005500;">(</span><span style="color: #005500;">new</span><span style="color: #113d73;">&nbsp;</span><span style="color: #113d73;">SimpleTestListener</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br />&nbsp;<br /><span style="color: #ba8370;">//&nbsp;Run&nbsp;the&nbsp;tests.</span><br /><span style="color: #113d73;">$suite</span><span style="color: #005500;">-&gt;</span><span style="color: #113d73;">run</span><span style="color: #005500;">(</span><span style="color: #113d73;">$result</span><span style="color: #005500;">)</span><span style="color: #005500;">;</span><br /><span style="color: #113d73;">?&gt;</span><br /></code></pre><pre class="screen">TestSuite 'ArrayTest' started.
Test 'testNewArrayIsEmpty' started.
Test 'testNewArrayIsEmpty' ended.
Test 'testArrayContainsAnElement' started.
Test 'testArrayContainsAnElement' ended.
TestSuite 'ArrayTest' ended.</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extending-phpunit.TestRunner"></a>New Test Runner</h2></div></div></div><p>
      If you need different feedback from the test execution, write your own
      test runner, interactive or not. The abstract
      <code class="literal">PHPUnit2_Runner_BaseTestRunner</code> class, which the
      <code class="literal">PHPUnit2_TextUI_TestRunner</code> class (the PHPUnit
      command-line test runner) inherits from, can be a starting point for
      this.
    </p></div></div><div class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="api.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="appendixes.phpunit1.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 14. PHPUnit API </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Appendix A. PHPUnit for PHP 4</td></tr></table></div><div xmlns="" class="copyright-notice"><a href="appendixes.copyright.html">Copyright</a> © 2005 <a href="http://www.sebastian-bergmann.de/">Sebastian Bergmann</a>
      and <a href="http://www.oreilly.com/">O'Reilly Media, Inc.</a>.
    </div></body></html>
